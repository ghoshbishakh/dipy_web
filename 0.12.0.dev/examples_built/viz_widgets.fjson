{"body": "<div class=\"section\" id=\"create-a-minimalistic-user-interface\">\n<span id=\"example-viz-widgets\"></span><h1>Create a minimalistic user interface<a class=\"headerlink\" href=\"#create-a-minimalistic-user-interface\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>DIPY allows to create a minimalistic interface using widgets.</p>\n<p>In this example we will create: a) two parallel steamtubes, b) add some buttons\nwhich will change the opacity of these tubes and c) move the streamtubes using\na slider.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"k\">import</span> <span class=\"n\">print_function</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dipy.viz</span> <span class=\"k\">import</span> <span class=\"n\">window</span><span class=\"p\">,</span> <span class=\"n\">actor</span><span class=\"p\">,</span> <span class=\"n\">widget</span>\n<span class=\"kn\">from</span> <span class=\"nn\">dipy.data</span> <span class=\"k\">import</span> <span class=\"n\">fetch_viz_icons</span><span class=\"p\">,</span> <span class=\"n\">read_viz_icons</span>\n</pre></div>\n</div>\n<p>First, we add a couple of streamtubes to the Renderer</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">renderer</span> <span class=\"o\">=</span> <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">Renderer</span><span class=\"p\">()</span>\n\n<span class=\"n\">lines</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">0.</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">0.</span><span class=\"p\">]]),</span>\n         <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mf\">0.</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mf\">0.</span><span class=\"p\">]])]</span>\n<span class=\"n\">colors</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([[</span><span class=\"mf\">1.</span><span class=\"p\">,</span> <span class=\"mf\">0.</span><span class=\"p\">,</span> <span class=\"mf\">0.</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"mf\">0.</span><span class=\"p\">,</span> <span class=\"o\">.</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mf\">0.</span><span class=\"p\">]])</span>\n<span class=\"n\">stream_actor</span> <span class=\"o\">=</span> <span class=\"n\">actor</span><span class=\"o\">.</span><span class=\"n\">streamtube</span><span class=\"p\">(</span><span class=\"n\">lines</span><span class=\"p\">,</span> <span class=\"n\">colors</span><span class=\"p\">,</span> <span class=\"n\">linewidth</span><span class=\"o\">=</span><span class=\"mf\">0.3</span><span class=\"p\">,</span> <span class=\"n\">lod</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"n\">stream_actor</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>The <code class=\"docutils literal\"><span class=\"pre\">ShowManager</span></code> allows to break the visualization process in steps so that\nthe widgets can be added and updated properly.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">show_manager</span> <span class=\"o\">=</span> <span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">ShowManager</span><span class=\"p\">(</span><span class=\"n\">renderer</span><span class=\"p\">,</span> <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">800</span><span class=\"p\">,</span> <span class=\"mi\">800</span><span class=\"p\">),</span>\n                                  <span class=\"n\">order_transparent</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Next we add the widgets and their callbacks.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">button_plus_callback</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;+ pressed&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">opacity</span> <span class=\"o\">=</span> <span class=\"n\">stream_actor</span><span class=\"o\">.</span><span class=\"n\">GetProperty</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">GetOpacity</span><span class=\"p\">()</span>\n    <span class=\"k\">if</span> <span class=\"n\">opacity</span> <span class=\"o\">&lt;</span> <span class=\"mi\">1</span><span class=\"p\">:</span>\n        <span class=\"n\">stream_actor</span><span class=\"o\">.</span><span class=\"n\">GetProperty</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">SetOpacity</span><span class=\"p\">(</span><span class=\"n\">opacity</span> <span class=\"o\">+</span> <span class=\"mf\">0.1</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">button_minus_callback</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;- pressed&#39;</span><span class=\"p\">)</span>\n\n    <span class=\"n\">opacity</span> <span class=\"o\">=</span> <span class=\"n\">stream_actor</span><span class=\"o\">.</span><span class=\"n\">GetProperty</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">GetOpacity</span><span class=\"p\">()</span>\n    <span class=\"k\">if</span> <span class=\"n\">opacity</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n        <span class=\"n\">stream_actor</span><span class=\"o\">.</span><span class=\"n\">GetProperty</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">SetOpacity</span><span class=\"p\">(</span><span class=\"n\">opacity</span> <span class=\"o\">-</span> <span class=\"mf\">0.1</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>We need to download some icons to create a face for our buttons. We provide\nsome simple icons in this tutorial. But you of course you can use any PNG icon\nyou may want.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">fetch_viz_icons</span><span class=\"p\">()</span>\n<span class=\"n\">button_png_plus</span> <span class=\"o\">=</span> <span class=\"n\">read_viz_icons</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"o\">=</span><span class=\"s1\">&#39;plus.png&#39;</span><span class=\"p\">)</span>\n\n<span class=\"n\">button_plus</span> <span class=\"o\">=</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">button</span><span class=\"p\">(</span><span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">iren</span><span class=\"p\">,</span>\n                            <span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"p\">,</span>\n                            <span class=\"n\">button_plus_callback</span><span class=\"p\">,</span>\n                            <span class=\"n\">button_png_plus</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"o\">.</span><span class=\"mi\">98</span><span class=\"p\">,</span> <span class=\"o\">.</span><span class=\"mi\">9</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">))</span>\n\n<span class=\"n\">button_png_minus</span> <span class=\"o\">=</span> <span class=\"n\">read_viz_icons</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"o\">=</span><span class=\"s1\">&#39;minus.png&#39;</span><span class=\"p\">)</span>\n<span class=\"n\">button_minus</span> <span class=\"o\">=</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">button</span><span class=\"p\">(</span><span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">iren</span><span class=\"p\">,</span>\n                             <span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"p\">,</span>\n                             <span class=\"n\">button_minus_callback</span><span class=\"p\">,</span>\n                             <span class=\"n\">button_png_minus</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"o\">.</span><span class=\"mi\">98</span><span class=\"p\">,</span> <span class=\"o\">.</span><span class=\"mi\">9</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"mi\">50</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">))</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">move_lines</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">):</span>\n    <span class=\"n\">stream_actor</span><span class=\"o\">.</span><span class=\"n\">SetPosition</span><span class=\"p\">((</span><span class=\"n\">obj</span><span class=\"o\">.</span><span class=\"n\">get_value</span><span class=\"p\">(),</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n<p>Then we create the slider.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">slider</span> <span class=\"o\">=</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">slider</span><span class=\"p\">(</span><span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">iren</span><span class=\"p\">,</span> <span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"p\">,</span>\n                       <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">move_lines</span><span class=\"p\">,</span>\n                       <span class=\"n\">min_value</span><span class=\"o\">=-</span><span class=\"mi\">1</span><span class=\"p\">,</span>\n                       <span class=\"n\">max_value</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span>\n                       <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"mf\">0.</span><span class=\"p\">,</span>\n                       <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"s2\">&quot;X&quot;</span><span class=\"p\">,</span>\n                       <span class=\"n\">right_normalized_pos</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"o\">.</span><span class=\"mi\">98</span><span class=\"p\">,</span> <span class=\"mf\">0.7</span><span class=\"p\">),</span>\n                       <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">120</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">label_format</span><span class=\"o\">=</span><span class=\"s2\">&quot;</span><span class=\"si\">%0.2lf</span><span class=\"s2\">&quot;</span><span class=\"p\">,</span>\n                       <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mf\">0.4</span><span class=\"p\">,</span> <span class=\"mf\">0.4</span><span class=\"p\">,</span> <span class=\"mf\">0.4</span><span class=\"p\">),</span>\n                       <span class=\"n\">selected_color</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mf\">0.2</span><span class=\"p\">,</span> <span class=\"mf\">0.2</span><span class=\"p\">,</span> <span class=\"mf\">0.2</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n<p>And we add a simple clickable text overlay at the bottom left corner.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">text_clicked</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">event</span><span class=\"p\">):</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">&quot;Awesome!&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">text</span> <span class=\"o\">=</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"p\">(</span><span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">iren</span><span class=\"p\">,</span> <span class=\"n\">show_manager</span><span class=\"o\">.</span><span class=\"n\">ren</span><span class=\"p\">,</span>\n                   <span class=\"n\">message</span><span class=\"o\">=</span><span class=\"s2\">&quot;Powered by DIPY&quot;</span><span class=\"p\">,</span>\n                   <span class=\"n\">callback</span><span class=\"o\">=</span><span class=\"n\">text_clicked</span><span class=\"p\">,</span>\n                   <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mf\">1.</span><span class=\"p\">,</span> <span class=\"o\">.</span><span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"o\">.</span><span class=\"mi\">0</span><span class=\"p\">),</span>\n                   <span class=\"n\">left_down_pos</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">),</span>\n                   <span class=\"n\">right_top_pos</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">200</span><span class=\"p\">,</span> <span class=\"mi\">35</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n<p>Position the camera.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">zoom</span><span class=\"p\">(</span><span class=\"mf\">0.7</span><span class=\"p\">)</span>\n<span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">roll</span><span class=\"p\">(</span><span class=\"mf\">10.</span><span class=\"p\">)</span>\n<span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">reset_clipping_range</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>Uncomment the following lines to start the interaction.</p>\n<div class=\"highlight-default\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># show_manager.initialize()</span>\n<span class=\"c1\"># show_manager.render()</span>\n<span class=\"c1\"># show_manager.start()</span>\n\n\n<span class=\"n\">window</span><span class=\"o\">.</span><span class=\"n\">record</span><span class=\"p\">(</span><span class=\"n\">renderer</span><span class=\"p\">,</span> <span class=\"n\">out_path</span><span class=\"o\">=</span><span class=\"s1\">&#39;mini_ui.png&#39;</span><span class=\"p\">,</span> <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">800</span><span class=\"p\">,</span> <span class=\"mi\">800</span><span class=\"p\">),</span>\n              <span class=\"n\">reset_camera</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n<span class=\"k\">del</span> <span class=\"n\">show_manager</span>\n</pre></div>\n</div>\n<div class=\"figure align-center\" id=\"id1\">\n<img alt=\"../../_images/mini_ui.png\" src=\"../../_images/mini_ui.png\" />\n<p class=\"caption\"><span class=\"caption-text\"><strong>A minimalistic user interface</strong>.</span></p>\n</div>\n<div class=\"admonition-example-source-code admonition\">\n<p class=\"first admonition-title\">Example source code</p>\n<p class=\"last\">You can download <a class=\"reference download internal\" href=\"../../_downloads/viz_widgets.py\" download=\"\"><code class=\"xref download docutils literal\"><span class=\"pre\">the</span> <span class=\"pre\">full</span> <span class=\"pre\">source</span> <span class=\"pre\">code</span> <span class=\"pre\">of</span> <span class=\"pre\">this</span> <span class=\"pre\">example</span></code></a>.\nThis same script is also included in the dipy source distribution under the\n<code class=\"file docutils literal\"><span class=\"pre\">doc/examples/</span></code> directory.</p>\n</div>\n</div>\n", "alabaster_version": "0.7.8", "display_toc": false, "title": "Create a minimalistic user interface", "sourcename": "examples_built/viz_widgets.txt", "customsidebar": null, "metatags": "", "current_page_name": "examples_built/viz_widgets", "next": null, "rellinks": [["genindex", "General Index", "I", "index"], ["np-modindex", "Python Module Index", "", "modules"]], "meta": {}, "parents": [], "sidebars": null, "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Create a minimalistic user interface</a></li>\n</ul>\n", "prev": null, "page_source_suffix": ".rst"}