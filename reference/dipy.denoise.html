<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dipy &mdash; dipy 0.12.0dev documentation</title>
    
    <link rel="stylesheet" href="../_static/dipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.12.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="dipy 0.12.0dev documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="index.html" />
    <link rel="next" title="direction" href="dipy.direction.html" />
  <meta name="keywords" content="dipy, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../index.html">
  <img src="../_static/dipy-banner.png" alt="dipy logo"  border="0" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dipy.direction.html" title="direction"
             accesskey="N">next</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">API Reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Site Navigation </h4>
  <ul>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="../devel/index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.org/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.org/software/projects/">NIPY Projects</a></li>
    <li><a class="reference external"
	href="https://mail.python.org/mailman/listinfo/neuroimaging">Mailing List</a></li>
    <li><a class="reference external"
	href="http://nipy.org/nipy/license.html">License</a></li>
  </ul>


  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">denoise</span></code></a><ul>
<li><a class="reference internal" href="#module-dipy.denoise.nlmeans">Module: <code class="docutils literal"><span class="pre">denoise.nlmeans</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.denoise.noise_estimate">Module: <code class="docutils literal"><span class="pre">denoise.noise_estimate</span></code></a><ul>
<li><a class="reference internal" href="#bench">bench</a></li>
<li><a class="reference internal" href="#test">test</a></li>
<li><a class="reference internal" href="#nlmeans">nlmeans</a></li>
<li><a class="reference internal" href="#nlmeans-3d">nlmeans_3d</a></li>
<li><a class="reference internal" href="#convolve">convolve</a></li>
<li><a class="reference internal" href="#estimate-sigma">estimate_sigma</a></li>
<li><a class="reference internal" href="#piesno">piesno</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="dipy.direction.html"
                        title="next chapter"><code class="docutils literal"><span class="pre">direction</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/dipy.denoise.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>

<div id="searchbox-ml" style="display: none">
  <h3>Search mailing list archive</h3>
  <script type="text/javascript">
    function mlsearch(curobj)
    {
    curobj.q.value="site:mail.python.org/pipermail/neuroimaging/ "+curobj.userquery.value
    }
  </script>
  <form action="http://www.google.com/search" method="get" onSubmit="mlsearch(this)">
    <input name="userquery" size="13" type="text" /> <input type="submit" value="Go" />
    <input name="q" type="hidden" />
  </form>
</div>

<div id="searchbox-site" style="display: none">
  <h3>Search this site</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="13" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


<script>
     ((window.gitter = {}).chat = {}).options = {
       room: 'nipy/dipy'
     };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-dipy.denoise">
<span id="denoise"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">denoise</span></code><a class="headerlink" href="#module-dipy.denoise" title="Permalink to this headline">¶</a></h1>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.denoise.bench" title="dipy.denoise.bench"><code class="xref py py-obj docutils literal"><span class="pre">bench</span></code></a></td>
<td>Run benchmarks for module using nose.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.denoise.test" title="dipy.denoise.test"><code class="xref py py-obj docutils literal"><span class="pre">test</span></code></a></td>
<td>Run tests for module using nose.</td>
</tr>
</tbody>
</table>
<div class="section" id="module-dipy.denoise.nlmeans">
<span id="module-denoise-nlmeans"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">denoise.nlmeans</span></code><a class="headerlink" href="#module-dipy.denoise.nlmeans" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.denoise.nlmeans.nlmeans" title="dipy.denoise.nlmeans.nlmeans"><code class="xref py py-obj docutils literal"><span class="pre">nlmeans</span></code></a>(arr,&nbsp;sigma[,&nbsp;mask,&nbsp;patch_radius,&nbsp;...])</td>
<td>Non-local means for denoising 3D and 4D images</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.denoise.nlmeans.nlmeans_3d" title="dipy.denoise.nlmeans.nlmeans_3d"><code class="xref py py-obj docutils literal"><span class="pre">nlmeans_3d</span></code></a></td>
<td>Non-local means for denoising 3D images</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.denoise.noise_estimate">
<span id="module-denoise-noise-estimate"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">denoise.noise_estimate</span></code><a class="headerlink" href="#module-dipy.denoise.noise_estimate" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.denoise.noise_estimate.convolve" title="dipy.denoise.noise_estimate.convolve"><code class="xref py py-obj docutils literal"><span class="pre">convolve</span></code></a>(input,&nbsp;weights[,&nbsp;output,&nbsp;mode,&nbsp;...])</td>
<td>Multidimensional convolution.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.denoise.noise_estimate.estimate_sigma" title="dipy.denoise.noise_estimate.estimate_sigma"><code class="xref py py-obj docutils literal"><span class="pre">estimate_sigma</span></code></a>(arr[,&nbsp;...])</td>
<td>Standard deviation estimation from local patches</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.denoise.noise_estimate.piesno" title="dipy.denoise.noise_estimate.piesno"><code class="xref py py-obj docutils literal"><span class="pre">piesno</span></code></a>(data,&nbsp;N[,&nbsp;alpha,&nbsp;l,&nbsp;itermax,&nbsp;eps,&nbsp;...])</td>
<td>Probabilistic Identification and Estimation of Noise (PIESNO).</td>
</tr>
</tbody>
</table>
<div class="section" id="bench">
<h3>bench<a class="headerlink" href="#bench" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.denoise.bench">
<code class="descclassname">dipy.denoise.</code><code class="descname">bench</code><span class="sig-paren">(</span><em>self</em>, <em>label='fast'</em>, <em>verbose=1</em>, <em>extra_argv=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.denoise.bench" title="Permalink to this definition">¶</a></dt>
<dd><p>Run benchmarks for module using nose.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>label</strong> : {&#8216;fast&#8217;, &#8216;full&#8217;, &#8216;&#8217;, attribute identifier}, optional</p>
<blockquote>
<div><p>Identifies the benchmarks to run. This can be a string to pass to
the nosetests executable with the &#8216;-A&#8217; option, or one of several
special values.  Special values are:
* &#8216;fast&#8217; - the default - which corresponds to the <code class="docutils literal"><span class="pre">nosetests</span> <span class="pre">-A</span></code></p>
<blockquote>
<div><p>option of &#8216;not slow&#8217;.</p>
</div></blockquote>
<ul class="simple">
<li>&#8216;full&#8217; - fast (as above) and slow benchmarks as in the
&#8216;no -A&#8217; option to nosetests - this is the same as &#8216;&#8217;.</li>
<li>None or &#8216;&#8217; - run all tests.</li>
</ul>
<p>attribute_identifier - string passed directly to nosetests as &#8216;-A&#8217;.</p>
</div></blockquote>
<p><strong>verbose</strong> : int, optional</p>
<blockquote>
<div><p>Verbosity value for benchmark outputs, in the range 1-10. Default is 1.</p>
</div></blockquote>
<p><strong>extra_argv</strong> : list, optional</p>
<blockquote>
<div><p>List with any extra arguments to pass to nosetests.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>success</strong> : bool</p>
<blockquote class="last">
<div><p>Returns True if running the benchmarks works, False if an error
occurred.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Benchmarks are like tests, but have names starting with &#8220;bench&#8221; instead
of &#8220;test&#8221;, and can be found under the &#8220;benchmarks&#8221; sub-directory of the
module.</p>
<p>Each NumPy module exposes <cite>bench</cite> in its namespace to run all benchmarks
for it.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">success</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">bench</span><span class="p">()</span> 
<span class="go">Running benchmarks for numpy.lib</span>
<span class="gp">...</span>
<span class="go">using 562341 items:</span>
<span class="go">unique:</span>
<span class="go">0.11</span>
<span class="go">unique1d:</span>
<span class="go">0.11</span>
<span class="go">ratio: 1.0</span>
<span class="go">nUnique: 56230 == 56230</span>
<span class="gp">...</span>
<span class="go">OK</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">success</span> 
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="test">
<h3>test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.denoise.test">
<code class="descclassname">dipy.denoise.</code><code class="descname">test</code><span class="sig-paren">(</span><em>self</em>, <em>label='fast'</em>, <em>verbose=1</em>, <em>extra_argv=None</em>, <em>doctests=False</em>, <em>coverage=False</em>, <em>raise_warnings=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.denoise.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run tests for module using nose.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>label</strong> : {&#8216;fast&#8217;, &#8216;full&#8217;, &#8216;&#8217;, attribute identifier}, optional</p>
<blockquote>
<div><p>Identifies the tests to run. This can be a string to pass to
the nosetests executable with the &#8216;-A&#8217; option, or one of several
special values.  Special values are:
* &#8216;fast&#8217; - the default - which corresponds to the <code class="docutils literal"><span class="pre">nosetests</span> <span class="pre">-A</span></code></p>
<blockquote>
<div><p>option of &#8216;not slow&#8217;.</p>
</div></blockquote>
<ul class="simple">
<li>&#8216;full&#8217; - fast (as above) and slow tests as in the
&#8216;no -A&#8217; option to nosetests - this is the same as &#8216;&#8217;.</li>
<li>None or &#8216;&#8217; - run all tests.</li>
</ul>
<p>attribute_identifier - string passed directly to nosetests as &#8216;-A&#8217;.</p>
</div></blockquote>
<p><strong>verbose</strong> : int, optional</p>
<blockquote>
<div><p>Verbosity value for test outputs, in the range 1-10. Default is 1.</p>
</div></blockquote>
<p><strong>extra_argv</strong> : list, optional</p>
<blockquote>
<div><p>List with any extra arguments to pass to nosetests.</p>
</div></blockquote>
<p><strong>doctests</strong> : bool, optional</p>
<blockquote>
<div><p>If True, run doctests in module. Default is False.</p>
</div></blockquote>
<p><strong>coverage</strong> : bool, optional</p>
<blockquote>
<div><p>If True, report coverage of NumPy code. Default is False.
(This requires the <a href="#id1"><span class="problematic" id="id2">`</span></a>coverage module:</p>
<blockquote>
<div><p>&lt;<a class="reference external" href="http://nedbatchelder.com/code/modules/coverage.html">http://nedbatchelder.com/code/modules/coverage.html</a>&gt;`_).</p>
</div></blockquote>
</div></blockquote>
<p><strong>raise_warnings</strong> : str or sequence of warnings, optional</p>
<blockquote>
<div><p>This specifies which warnings to configure as &#8216;raise&#8217; instead
of &#8216;warn&#8217; during the test execution.  Valid strings are:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;develop&#8221; : equals <code class="docutils literal"><span class="pre">(DeprecationWarning,</span> <span class="pre">RuntimeWarning)</span></code></li>
<li>&#8220;release&#8221; : equals <code class="docutils literal"><span class="pre">()</span></code>, don&#8217;t raise on any warnings.</li>
</ul>
</div></blockquote>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> : object</p>
<blockquote class="last">
<div><p>Returns the result of running the tests as a
<code class="docutils literal"><span class="pre">nose.result.TextTestResult</span></code> object.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Each NumPy module exposes <cite>test</cite> in its namespace to run all tests for it.
For example, to run all tests for numpy.lib:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> 
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> 
<span class="go">Running unit tests for numpy.lib</span>
<span class="gp">...</span>
<span class="go">Ran 976 tests in 3.933s</span>
</pre></div>
</div>
<p>OK</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">errors</span> 
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">knownfail</span> 
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="nlmeans">
<h3>nlmeans<a class="headerlink" href="#nlmeans" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.denoise.nlmeans.nlmeans">
<code class="descclassname">dipy.denoise.nlmeans.</code><code class="descname">nlmeans</code><span class="sig-paren">(</span><em>arr</em>, <em>sigma</em>, <em>mask=None</em>, <em>patch_radius=1</em>, <em>block_radius=5</em>, <em>rician=True</em>, <em>num_threads=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.denoise.nlmeans.nlmeans" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-local means for denoising 3D and 4D images</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>arr</strong> : 3D or 4D ndarray</p>
<blockquote>
<div><p>The array to be denoised</p>
</div></blockquote>
<p><strong>mask</strong> : 3D ndarray</p>
<p><strong>sigma</strong> : float or 3D array</p>
<blockquote>
<div><p>standard deviation of the noise estimated from the data</p>
</div></blockquote>
<p><strong>patch_radius</strong> : int</p>
<blockquote>
<div><p>patch size is <code class="docutils literal"><span class="pre">2</span> <span class="pre">x</span> <span class="pre">patch_radius</span> <span class="pre">+</span> <span class="pre">1</span></code>. Default is 1.</p>
</div></blockquote>
<p><strong>block_radius</strong> : int</p>
<blockquote>
<div><p>block size is <code class="docutils literal"><span class="pre">2</span> <span class="pre">x</span> <span class="pre">block_radius</span> <span class="pre">+</span> <span class="pre">1</span></code>. Default is 5.</p>
</div></blockquote>
<p><strong>rician</strong> : boolean</p>
<blockquote>
<div><p>If True the noise is estimated as Rician, otherwise Gaussian noise
is assumed.</p>
</div></blockquote>
<p><strong>num_threads</strong> : int</p>
<blockquote>
<div><p>Number of threads. If None (default) then all available threads
will be used (all CPU cores).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>denoised_arr</strong> : ndarray</p>
<blockquote class="last">
<div><p>the denoised <code class="docutils literal"><span class="pre">arr</span></code> which has the same shape as <code class="docutils literal"><span class="pre">arr</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="nlmeans-3d">
<h3>nlmeans_3d<a class="headerlink" href="#nlmeans-3d" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.denoise.nlmeans.nlmeans_3d">
<code class="descclassname">dipy.denoise.nlmeans.</code><code class="descname">nlmeans_3d</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.denoise.nlmeans.nlmeans_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-local means for denoising 3D images</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>arr</strong> : 3D ndarray</p>
<blockquote>
<div><p>The array to be denoised</p>
</div></blockquote>
<p><strong>mask</strong> : 3D ndarray</p>
<p><strong>sigma</strong> : float or 3D array</p>
<blockquote>
<div><p>standard deviation of the noise estimated from the data</p>
</div></blockquote>
<p><strong>patch_radius</strong> : int</p>
<blockquote>
<div><p>patch size is <code class="docutils literal"><span class="pre">2</span> <span class="pre">x</span> <span class="pre">patch_radius</span> <span class="pre">+</span> <span class="pre">1</span></code>. Default is 1.</p>
</div></blockquote>
<p><strong>block_radius</strong> : int</p>
<blockquote>
<div><p>block size is <code class="docutils literal"><span class="pre">2</span> <span class="pre">x</span> <span class="pre">block_radius</span> <span class="pre">+</span> <span class="pre">1</span></code>. Default is 5.</p>
</div></blockquote>
<p><strong>rician</strong> : boolean</p>
<blockquote>
<div><p>If True the noise is estimated as Rician, otherwise Gaussian noise
is assumed.</p>
</div></blockquote>
<p><strong>num_threads</strong> : int</p>
<blockquote>
<div><p>Number of threads. If None (default) then all available threads
will be used.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>denoised_arr</strong> : ndarray</p>
<blockquote class="last">
<div><p>the denoised <code class="docutils literal"><span class="pre">arr</span></code> which has the same shape as <code class="docutils literal"><span class="pre">arr</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="convolve">
<h3>convolve<a class="headerlink" href="#convolve" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.denoise.noise_estimate.convolve">
<code class="descclassname">dipy.denoise.noise_estimate.</code><code class="descname">convolve</code><span class="sig-paren">(</span><em>input</em>, <em>weights</em>, <em>output=None</em>, <em>mode='reflect'</em>, <em>cval=0.0</em>, <em>origin=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.denoise.noise_estimate.convolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Multidimensional convolution.</p>
<p>The array is convolved with the given kernel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input</strong> : array_like</p>
<blockquote>
<div><p>Input array to filter.</p>
</div></blockquote>
<p><strong>weights</strong> : array_like</p>
<blockquote>
<div><p>Array of weights, same number of dimensions as input</p>
</div></blockquote>
<p><strong>output</strong> : ndarray, optional</p>
<blockquote>
<div><p>The <cite>output</cite> parameter passes an array in which to store the
filter output.</p>
</div></blockquote>
<p><strong>mode</strong> : {&#8216;reflect&#8217;,&#8217;constant&#8217;,&#8217;nearest&#8217;,&#8217;mirror&#8217;, &#8216;wrap&#8217;}, optional</p>
<blockquote>
<div><p>the <cite>mode</cite> parameter determines how the array borders are
handled. For &#8216;constant&#8217; mode, values beyond borders are set to be
<cite>cval</cite>. Default is &#8216;reflect&#8217;.</p>
</div></blockquote>
<p><strong>cval</strong> : scalar, optional</p>
<blockquote>
<div><p>Value to fill past edges of input if <cite>mode</cite> is &#8216;constant&#8217;. Default
is 0.0</p>
</div></blockquote>
<p><strong>origin</strong> : array_like, optional</p>
<blockquote>
<div><p>The <cite>origin</cite> parameter controls the placement of the filter, 
relative to the centre of the current element of the input.  
Default of 0 is equivalent to <code class="docutils literal"><span class="pre">(0,)*input.ndim</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> : ndarray</p>
<blockquote class="last">
<div><p>The result of convolution of <cite>input</cite> with <cite>weights</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">correlate</span></code></dt>
<dd>Correlate an image with a kernel.</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>Each value in result is <span class="math">\(C_i = \sum_j{I_{i+k-j} W_j}\)</span>, where
W is the <cite>weights</cite> kernel,
j is the n-D spatial index over <span class="math">\(W\)</span>,
I is the <cite>input</cite> and k is the coordinate of the center of
W, specified by <cite>origin</cite> in the input parameters.</p>
<p class="rubric">Examples</p>
<p>Perhaps the simplest case to understand is <code class="docutils literal"><span class="pre">mode='constant',</span> <span class="pre">cval=0.0</span></code>,
because in this case borders (i.e. where the <cite>weights</cite> kernel, centered
on any one value, extends beyond an edge of <cite>input</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">ndimage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">cval</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="go">array([[11, 10,  7,  4],</span>
<span class="go">       [10,  3, 11, 11],</span>
<span class="go">       [15, 12, 14,  7],</span>
<span class="go">       [12,  3,  7,  0]])</span>
</pre></div>
</div>
<p>Setting <code class="docutils literal"><span class="pre">cval=1.0</span></code> is equivalent to padding the outer edge of <cite>input</cite>
with 1.0&#8217;s (and then extracting only the original region of the result).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">cval</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="go">array([[13, 11,  8,  7],</span>
<span class="go">       [11,  3, 11, 14],</span>
<span class="go">       [16, 12, 14, 10],</span>
<span class="go">       [15,  6, 10,  5]])</span>
</pre></div>
</div>
<p>With <code class="docutils literal"><span class="pre">mode='reflect'</span></code> (the default), outer values are reflected at the
edge of <cite>input</cite> to fill in missing values.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;reflect&#39;</span><span class="p">)</span>
<span class="go">array([[5, 0, 0],</span>
<span class="go">       [3, 0, 0],</span>
<span class="go">       [1, 0, 0]])</span>
</pre></div>
</div>
<p>This includes diagonally at the corners.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
<span class="go">array([[4, 2, 0],</span>
<span class="go">       [3, 2, 0],</span>
<span class="go">       [1, 1, 0]])</span>
</pre></div>
</div>
<p>With <code class="docutils literal"><span class="pre">mode='nearest'</span></code>, the single nearest value in to an edge in
<cite>input</cite> is repeated as many times as needed to match the overlapping
<cite>weights</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
<span class="go">array([[7, 0, 3],</span>
<span class="go">       [5, 0, 2],</span>
<span class="go">       [3, 0, 1]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="estimate-sigma">
<h3>estimate_sigma<a class="headerlink" href="#estimate-sigma" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.denoise.noise_estimate.estimate_sigma">
<code class="descclassname">dipy.denoise.noise_estimate.</code><code class="descname">estimate_sigma</code><span class="sig-paren">(</span><em>arr</em>, <em>disable_background_masking=False</em>, <em>N=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.denoise.noise_estimate.estimate_sigma" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard deviation estimation from local patches</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>arr</strong> : 3D or 4D ndarray</p>
<blockquote>
<div><p>The array to be estimated</p>
</div></blockquote>
<p><strong>disable_background_masking</strong> : bool, default False</p>
<blockquote>
<div><p>If True, uses all voxels for the estimation, otherwise, only non-zeros
voxels are used. Useful if the background is masked by the scanner.</p>
</div></blockquote>
<p><strong>N</strong> : int, default 0</p>
<blockquote>
<div><p>Number of coils of the receiver array. Use N = 1 in case of a SENSE
reconstruction (Philips scanners) or the number of coils for a GRAPPA
reconstruction (Siemens and GE). Use 0 to disable the correction factor,
as for example if the noise is Gaussian distributed. See [1] for more
information.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>sigma</strong> : ndarray</p>
<blockquote class="last">
<div><p>standard deviation of the noise, one estimation per volume.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="piesno">
<h3>piesno<a class="headerlink" href="#piesno" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.denoise.noise_estimate.piesno">
<code class="descclassname">dipy.denoise.noise_estimate.</code><code class="descname">piesno</code><span class="sig-paren">(</span><em>data</em>, <em>N</em>, <em>alpha=0.01</em>, <em>l=100</em>, <em>itermax=100</em>, <em>eps=1e-05</em>, <em>return_mask=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.denoise.noise_estimate.piesno" title="Permalink to this definition">¶</a></dt>
<dd><p>Probabilistic Identification and Estimation of Noise (PIESNO).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : ndarray</p>
<blockquote>
<div><p>The magnitude signals to analyse. The last dimension must contain the
same realisation of the volume, such as dMRI or fMRI data.</p>
</div></blockquote>
<p><strong>N</strong> : int</p>
<blockquote>
<div><p>The number of phase array coils of the MRI scanner.
If your scanner does a SENSE reconstruction, ALWAYS use N=1, as the
noise profile is always Rician.
If your scanner does a GRAPPA reconstruction, set N as the number
of phase array coils.</p>
</div></blockquote>
<p><strong>alpha</strong> : float</p>
<blockquote>
<div><p>Probabilistic estimation threshold for the gamma function.</p>
</div></blockquote>
<p><strong>l</strong> : int</p>
<blockquote>
<div><p>number of initial estimates for sigma to try.</p>
</div></blockquote>
<p><strong>itermax</strong> : int</p>
<blockquote>
<div><p>Maximum number of iterations to execute if convergence
is not reached.</p>
</div></blockquote>
<p><strong>eps</strong> : float</p>
<blockquote>
<div><p>Tolerance for the convergence criterion. Convergence is
reached if two subsequent estimates are smaller than eps.</p>
</div></blockquote>
<p><strong>return_mask</strong> : bool</p>
<blockquote>
<div><p>If True, return a mask identyfing all the pure noise voxel
that were found.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>sigma</strong> : float</p>
<blockquote>
<div><p>The estimated standard deviation of the gaussian noise.</p>
</div></blockquote>
<p><strong>mask</strong> : ndarray (optional)</p>
<blockquote class="last">
<div><p>A boolean mask indicating the voxels identified as pure noise.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r55" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[R55]</a></td><td>Koay CG, Ozarslan E and Pierpaoli C.</td></tr>
</tbody>
</table>
<p>&#8220;Probabilistic Identification and Estimation of Noise (PIESNO):
A self-consistent approach and its applications in MRI.&#8221;
Journal of Magnetic Resonance 2009; 199: 94-103.</p>
<table class="docutils citation" frame="void" id="r56" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[R56]</a></td><td>Koay CG, Ozarslan E and Basser PJ.</td></tr>
</tbody>
</table>
<p>&#8220;A signal transformational framework for breaking the noise floor
and its applications in MRI.&#8221;
Journal of Magnetic Resonance 2009; 197: 108-119.</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dipy.direction.html" title="direction"
             >next</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2008-2016, dipy developers &lt;neuroimaging@python.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>